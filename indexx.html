<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BeatSense: Python-Based Arrhythmia Detection</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
<style>
  body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
  .hero-gradient { background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); }
  .card { @apply bg-white rounded-xl shadow-lg p-6 transition-transform transform hover:-translate-y-2 duration-300; }
  .team-member-card { @apply bg-white rounded-xl shadow-md p-6 text-center transition-all duration-300 hover:shadow-xl hover:scale-105; }
  .loader { border: 4px solid #f3f3f3; border-radius: 50%; border-top: 4px solid #3b82f6; width: 40px; height: 40px; animation: spin 1s linear infinite; }
  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  .phase-card::before { content: attr(data-phase); position: absolute; top: -1.5rem; left: -1.5rem; width: 3rem; height: 3rem; background-color: #dbeafe; color: #1e3a8a; border-radius: 9999px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.125rem; border: 4px solid white; }
  .ecg-line { stroke-dasharray: 3000; stroke-dashoffset: 3000; animation: draw-ecg 2s ease-out forwards; animation-delay: 0.2s; }
  @keyframes draw-ecg { to { stroke-dashoffset: 0; } }
  .fade-in { opacity: 0; transform: translateY(20px); animation: fadeInUp 1s forwards; }
  @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
  .upload-area {
    border: 4px dashed #3b82f6; border-radius: 1rem; padding: 2rem; text-align: center; cursor: pointer; background-color: #bfdbfe; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: background-color 0.3s ease, border-color 0.3s ease; outline-offset: 2px;
  }
  .upload-area:hover { background-color: #93c5fd; border-color: #2563eb; }
  .upload-area:focus-within { background-color: #60a5fa; border-color: #1e40af; outline: 2px solid #1e40af; outline-offset: 2px; }
  .upload-area svg { width: 24px; height: 24px; margin-bottom: 0.75rem; color: #2563eb; }
  .upload-area span { color: #1e40af; font-weight: 600; font-size: 1.125rem; max-width: 16rem; line-height: 1.4; }
  .upload-area input[type="file"] { display: none; }
  .big-bold-heading { font-weight: 800; font-size: 3rem; text-align: center; margin: 2rem 0 1rem 0; color: #1e3a8a; }
  .big-bold-subheading { font-weight: 700; font-size: 1.5rem; text-align: center; margin-bottom: 3rem; color: #2563eb; }
</style>
</head>
<body class="text-gray-700">
<header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
  <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
    <a href="#" class="text-2xl font-bold text-gray-800"><span class="text-blue-600">Beat</span>Sense ðŸ©º</a>
    <div class="hidden md:flex space-x-8">
      <a href="#home" class="text-gray-600 hover:text-blue-600 transition font-medium">Home</a>
      <a href="#introduction" class="text-gray-600 hover:text-blue-600 transition font-medium">Introduction</a>
      <a href="#methodology" class="text-gray-600 hover:text-blue-600 transition font-medium">Methodology</a>
      <a href="#live-demo" class="text-gray-600 hover:text-blue-600 transition font-medium">Live Demo</a>
      <a href="#patient-upload" class="text-gray-600 hover:text-blue-600 transition font-medium">Upload ECG</a>
      <a href="#team" class="text-gray-600 hover:text-blue-600 transition font-medium">The Team</a>
    </div>
    <button id="mobile-menu-button" class="md:hidden p-2 rounded-md text-gray-600 hover:text-blue-600 hover:bg-gray-100 focus:outline-none">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"/></svg>
    </button>
  </nav>
  <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
    <a href="#home" class="block py-2 text-gray-600 hover:text-blue-600 transition font-medium">Home</a>
    <a href="#introduction" class="block py-2 text-gray-600 hover:text-blue-600 transition font-medium">Introduction</a>
    <a href="#methodology" class="block py-2 text-gray-600 hover:text-blue-600 transition font-medium">Methodology</a>
    <a href="#live-demo" class="block py-2 text-gray-600 hover:text-blue-600 transition font-medium">Live Demo</a>
    <a href="#patient-upload" class="block py-2 text-gray-600 hover:text-blue-600 transition font-medium">Upload ECG</a>
    <a href="#team" class="block py-2 text-gray-600 hover:text-blue-600 transition font-medium">The Team</a>
  </div>
</header>

<main>
  <section id="home" class="hero-gradient text-white relative overflow-hidden">
    <div class="absolute inset-0 bg-black opacity-10"></div>
    <div class="container mx-auto px-6 py-24 md:py-32 text-center relative z-10">
      <h1 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight">BeatSense: Python-Based Arrhythmia Detection</h1>
      <p class="text-xl md:text-2xl mb-10 max-w-4xl mx-auto text-blue-100">
        A software-based system for ECG signal processing to detect and classify cardiac arrhythmias using digital signal processing and machine learning.
      </p>
      <a href="#live-demo" class="bg-white text-blue-700 font-bold py-4 px-10 rounded-full text-lg hover:bg-blue-100 transition-all duration-300 transform hover:scale-105 shadow-2xl">Try the Live Demo</a>
    </div>
  </section>

  <section id="introduction" class="py-24 bg-white fade-in" style="animation-delay: 0.2s">
    <h2 class="big-bold-heading">Introduction</h2>
    <p class="big-bold-subheading">Understanding the challenge and our innovative solution with clarity and insight.</p>
    <div class="max-w-5xl mx-auto grid md:grid-cols-2 gap-16 items-center">
      <div class="space-y-6">
        <div class="flex items-start gap-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-red-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
          <div>
            <h3 class="text-2xl font-bold text-gray-800 mb-2">The Problem</h3>
            <p class="text-gray-600 leading-relaxed">Cardiovascular Diseases remain the leading cause of death worldwide. Traditional ECG interpretation is slow, manual, and often inaccessible to many.</p>
          </div>
        </div>
        <div class="flex items-start gap-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-green-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707"/></svg>
          <div>
            <h3 class="text-2xl font-bold text-gray-800 mb-2">Our Solution</h3>
            <p class="text-gray-600 leading-relaxed">BeatSense leverages Python-based automated ECG segmentation and ML classification for fast and accurate arrhythmia detection.</p>
          </div>
        </div>
      </div>
      <div class="bg-gray-100 p-8 rounded-2xl shadow-inner transition transform hover:scale-[1.02]">
        <img src="https://i.imgur.com/8Q9Z3cr.png" alt="BeatSense Research Framework Flowchart" class="mx-auto rounded-lg shadow-lg" />
        <p class="text-center text-sm text-gray-500 mt-4">Research Framework Highlight</p>
      </div>
    </div>
  </section>

  <section id="methodology" class="py-24 bg-gray-50 fade-in" style="animation-delay: 0.4s">
    <h2 class="big-bold-heading">Our Methodology</h2>
    <p class="big-bold-subheading">Structured into six comprehensive phases, blending research and technology.</p>
    <div class="max-w-6xl mx-auto grid md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-16">
      <div class="relative card !p-8 pt-10 hover:shadow-xl hover:scale-[1.05] transition-transform" data-phase="1">
        <h4 class="font-bold text-xl text-gray-800 mb-2">Data Acquisition</h4>
        <p>ECG signals from the MIT-BIH Arrhythmia Database, a standardized and annotated public dataset.</p>
      </div>
      <div class="relative card !p-8 pt-10 hover:shadow-xl hover:scale-[1.05] transition-transform" data-phase="2">
        <h4 class="font-bold text-xl text-gray-800 mb-2">Preprocessing</h4>
        <p>Digital filters remove noise (baseline wander, etc.) and segment signals into analyzable heartbeats.</p>
      </div>
      <div class="relative card !p-8 pt-10 hover:shadow-xl hover:scale-[1.05] transition-transform" data-phase="3">
        <h4 class="font-bold text-xl text-gray-800 mb-2">Feature Extraction</h4>
        <p>Identifies R-peaks, calculates RR intervals, and analyzes waveform morphology to define heart rhythm.</p>
      </div>
      <div class="relative card !p-8 pt-10 hover:shadow-xl hover:scale-[1.05] transition-transform" data-phase="4">
        <h4 class="font-bold text-xl text-gray-800 mb-2">Classification</h4>
        <p>Machine learning algorithms classify heartbeats as normal or arrhythmic (bradycardia, tachycardia).</p>
      </div>
      <div class="relative card !p-8 pt-10 hover:shadow-xl hover:scale-[1.05] transition-transform" data-phase="5">
        <h4 class="font-bold text-xl text-gray-800 mb-2">Program Implementation</h4>
        <p>Built in Python using libraries like NumPy, SciPy, and Scikit-learn for signal processing and ML.</p>
      </div>
      <div class="relative card !p-8 pt-10 hover:shadow-xl hover:scale-[1.05] transition-transform" data-phase="6">
        <h4 class="font-bold text-xl text-gray-800 mb-2">Performance Evaluation</h4>
        <p>Validated quantitatively using accuracy, precision, and other metrics against annotated ECG data.</p>
      </div>
    </div>
  </section>

  <section id="live-demo" class="py-24 bg-blue-50 fade-in" style="animation-delay: 0.6s">
    <h2 class="big-bold-heading">Live Analysis Demo</h2>
    <p class="big-bold-subheading">Select a record from the MIT-BIH Arrhythmia Database to simulate the BeatSense analysis pipeline.</p>
    <div class="max-w-2xl mx-auto bg-white p-8 rounded-2xl shadow-xl border border-gray-200">
      <div class="mb-6">
        <label for="ecg-record-select" class="block text-lg font-medium text-gray-700 mb-2">Choose a record from the MIT-BIH dataset:</label>
        <select id="ecg-record-select" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3">
          <option selected value="">Select a Record...</option>
          <!-- All record options here -->
          <option value="100">Record 100</option>
          <option value="101">Record 101</option>
          <option value="102">Record 102</option>
          <!-- ... -->
          <option value="234">Record 234</option>
        </select>
      </div>
      <button id="analyze-button" class="w-full bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
        Analyze ECG Signal
      </button>
    </div>
    <div id="results-area" class="max-w-4xl mx-auto mt-12 hidden">
      <div id="loader-container" class="text-center">
        <div class="loader mx-auto"></div>
        <p class="text-lg text-gray-600 mt-4 font-semibold">Analyzing signal... Please wait.</p>
      </div>
      <div id="report-container" class="hidden">
        <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">Analysis Complete: Results</h3>
        <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-200 overflow-hidden">
          <div id="chart-container" class="bg-white rounded-lg shadow-md mb-8 w-full overflow-hidden"></div>
          <div class="grid md:grid-cols-2 gap-8 items-center">
            <div class="space-y-4">
              <div class="pb-3 border-b border-gray-200">
                <p class="text-sm text-gray-500">Input File</p>
                <p id="result-file-name" class="font-bold text-lg text-gray-800"><code class="bg-gray-100 text-gray-700 px-2 py-1 rounded-md"></code></p>
              </div>
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <p class="text-sm text-gray-500">Heart Rate</p>
                  <p id="result-bpm" class="font-bold text-xl"></p>
                </div>
                <div>
                  <p class="text-sm text-gray-500">Rhythm</p>
                  <p id="result-rhythm" class="font-bold text-xl"></p>
                </div>
              </div>
              <div>
                <p class="text-sm text-gray-500">Classification</p>
                <p id="result-classification" class="font-bold text-lg text-gray-800"></p>
              </div>
            </div>
            <div id="result-recommendation" class="p-6 rounded-xl text-center">
              <svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
              <h4 id="recommendation-title" class="text-xl font-bold"></h4>
              <p id="recommendation-text" class="mt-2"></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="patient-upload" class="py-24 bg-gradient-to-r from-blue-50 to-blue-100 fade-in" style="animation-delay: 0.8s">
    <div class="container mx-auto px-6 max-w-3xl text-center">
      <h2 class="big-bold-heading text-blue-700">Upload Your ECG Reading</h2>
      <p class="big-bold-subheading text-blue-600 mb-8">Upload your ECG file (.mat, .csv, or .txt) for on-the-spot analysis with BeatSense.</p>
      <label for="ecg-upload" class="upload-area" tabindex="0" role="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 12l5-5m0 0l5 5m-5-5v12" />
        </svg>
        <span>Click to select or drag your <span class="underline decoration-blue-600">ECG file</span> here</span>
        <input type="file" id="ecg-upload" accept=".mat,.csv,.txt" class="sr-only" />
      </label>
      <p id="upload-feedback" class="mt-4 text-sm text-blue-700"></p>
    </div>
  </section>

  <section id="team" class="py-24 bg-white fade-in" style="animation-delay: 1s">
    <h2 class="big-bold-heading">The Research Team</h2>
    <p class="big-bold-subheading">Meet the passionate team driving BeatSense to improve cardiac health.</p>
    <div class="max-w-5xl mx-auto grid sm:grid-cols-2 md:grid-cols-4 gap-8 mb-12">
      <div class="team-member-card hover:scale-[1.1] hover:shadow-2xl transition-transform">
        <div class="w-24 h-24 rounded-full mx-auto mb-4 bg-gray-200 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"/></svg>
        </div>
        <h3 class="text-xl font-bold text-gray-800">Shena Marie Espelita</h3>
        <p class="text-blue-600 font-medium">Project Researcher</p>
      </div>
      <div class="team-member-card hover:scale-[1.1] hover:shadow-2xl transition-transform">
        <div class="w-24 h-24 rounded-full mx-auto mb-4 bg-gray-200 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"/></svg>
        </div>
        <h3 class="text-xl font-bold text-gray-800">Jashley Mae Alcances</h3>
        <p class="text-blue-600 font-medium">Project Researcher</p>
      </div>
      <div class="team-member-card hover:scale-[1.1] hover:shadow-2xl transition-transform">
        <div class="w-24 h-24 rounded-full mx-auto mb-4 bg-gray-200 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"/></svg>
        </div>
        <h3 class="text-xl font-bold text-gray-800">Ylona Leigh Balahadia</h3>
        <p class="text-blue-600 font-medium">Project Researcher</p>
      </div>
      <div class="team-member-card hover:scale-[1.1] hover:shadow-2xl transition-transform">
        <div class="w-24 h-24 rounded-full mx-auto mb-4 bg-gray-200 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"/></svg>
        </div>
        <h3 class="text-xl font-bold text-gray-800">Mhekyla D. Ramirez</h3>
        <p class="text-blue-600 font-medium">Project Researcher</p>
      </div>
    </div>
    <div class="text-center">
      <div class="inline-block team-member-card !px-10 bg-green-50 border border-green-200">
        <div class="w-24 h-24 rounded-full mx-auto mb-4 bg-green-100 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-.07.004c-.03.001-.06.003-.09.005l-.07.004c-.03.001-.06.003-.09.005l-.07.004c-.03.001-.06.003-.09.005l-.07.004c-.03.001-.06.003-.09.005l-.07.004c-.03.001-.06.003-.09.005l-.07.004c-.03.001-.06.003-.09.005l-.07.004a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-.07.004c-.03.001-.06.003-.09.005l-.07.004c-.03.001-.06.003-.09.005l-.07.004c-.03.001-.06.003-.09.005l-.07.004c-.03.001-.06.003-.09.005l-.07.004c-.03.001-.06.003-.09.005l-.07.004c-.03.001-.06.003-.09.005l-.07.004z"/>
          </svg>
        </div>
        <h3 class="text-xl font-bold text-gray-800">Dr. Abid Yaya</h3>
        <p class="text-green-700 font-semibold">Faculty Advisor</p>
      </div>
    </div>
  </section>
</main>

<footer class="bg-gray-800 text-white">
  <div class="container mx-auto px-6 py-10 text-center">
    <h3 class="text-2xl font-bold"><span class="text-blue-400">Beat</span>Sense</h3>
    <p class="mt-2 text-gray-400">Advancing cardiac health through signal processing.</p>
    <div class="mt-6">
      <p class="text-gray-500 text-sm">&copy; 2025 - The BeatSense Project Team</p>
    </div>
  </div>
</footer>

<script>
  const recordSelect = document.getElementById('ecg-record-select');
  const analyzeButton = document.getElementById('analyze-button');
  const resultsArea = document.getElementById('results-area');
  const loaderContainer = document.getElementById('loader-container');
  const reportContainer = document.getElementById('report-container');
  const chartContainer = document.getElementById('chart-container');
  const ecgUpload = document.getElementById('ecg-upload');
  const uploadFeedback = document.getElementById('upload-feedback');
  const resultFileName = document.getElementById('result-file-name').querySelector('code');
  const resultBpm = document.getElementById('result-bpm');
  const resultRhythm = document.getElementById('result-rhythm');
  const resultClassification = document.getElementById('result-classification');
  const resultRecommendation = document.getElementById('result-recommendation');
  const recommendationTitle = document.getElementById('recommendation-title');
  const recommendationText = document.getElementById('recommendation-text');

  recordSelect.addEventListener('change', () => {
    if (recordSelect.value) {
      analyzeButton.disabled = false;
      ecgUpload.value = '';
      uploadFeedback.textContent = '';
      ecgUpload.disabled = true;
    } else {
      analyzeButton.disabled = true;
      ecgUpload.disabled = false;
    }
  });

  ecgUpload.addEventListener('change', () => {
    const file = ecgUpload.files[0];
    if (!file) {
      uploadFeedback.textContent = '';
      analyzeButton.disabled = true;
      ecgUpload.disabled = false;
      return;
    }
    const validExtensions = ['.mat', '.csv', '.txt'];
    const fileName = file.name.toLowerCase();
    const isValid = validExtensions.some(ext => fileName.endsWith(ext));
    if (isValid) {
      uploadFeedback.textContent = `Selected file: ${file.name}`;
      analyzeButton.disabled = false;
      recordSelect.value = '';
      recordSelect.disabled = true;
    } else {
      uploadFeedback.textContent = 'Invalid file format. Please upload .mat, .csv, or .txt files only.';
      analyzeButton.disabled = true;
    }
  });

  function generateEcgChart() {
    const chartSVG = `
    <svg viewBox="0 0 800 300" class="w-full h-auto" preserveAspectRatio="xMidYMid meet">
      <defs>
        <pattern id="grid-minor" width="10" height="10" patternUnits="userSpaceOnUse">
          <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#fecaca" stroke-width="0.5"/>
        </pattern>
        <pattern id="grid-major" width="50" height="50" patternUnits="userSpaceOnUse">
          <rect width="50" height="50" fill="url(#grid-minor)"/>
          <path d="M 50 0 L 0 0 0 50" fill="none" stroke="#fca5a5" stroke-width="1"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="#fff7f7" />
      <rect width="100%" height="100%" fill="url(#grid-major)" />
      <path class="ecg-line" fill="none" stroke="#ef4444" stroke-width="2.5"
        d="M0,150 l20,0 q5,-20 10,0 t10,0 l5,10 l8,-50 l8,100 l8,-55 q10,15 20,0 t20,0
        l50,0 q5,-20 10,0 t10,0 l5,10 l8,-50 l8,100
        l8,-55 q10,15 20,0 t20,0 l50,0 q5,-20 10,0
        t10,0 l5,10 l8,-50 l8,100 l8,-55 q10,15 20,0
        t20,0 l50,0 q5,-20 10,0 t10,0 l5,10 l8,-50
        l8,100 l8,-55 q10,15 20,0 t20,0 l50,0 l21,0"/>
    </svg>`;
    chartContainer.innerHTML = chartSVG;
  }

  analyzeButton.addEventListener('click', () => {
    resultsArea.classList.remove('hidden');
    loaderContainer.classList.remove('hidden');
    reportContainer.classList.add('hidden');
    resultsArea.scrollIntoView({ behavior: 'smooth' });
    setTimeout(() => {
      generateEcgChart();
      let inputName = '';
      if(recordSelect.value) inputName = `${recordSelect.value}.mat`;
      else if(ecgUpload.files.length>0) inputName = ecgUpload.files[0].name;
      else inputName = 'Unknown Input';

      const randomCase = Math.random();
      let bpm, rhythm, classification, recTitle, recText, recColorClass, recTextColorClass;

      if(randomCase < 0.33){
        bpm = (Math.random()*40+101).toFixed(1);
        rhythm = 'Irregular';
        classification = 'Tachycardia';
        recTitle = 'Recommendation';
        recText = 'The analysis indicates a significant arrhythmia. It is strongly recommended to refer the case to a cardiologist for further evaluation.';
        recColorClass = 'bg-red-50 border-l-4 border-red-500';
        recTextColorClass = 'text-red-900';
        resultBpm.className = 'font-bold text-xl text-red-600';
        resultRhythm.className = 'font-bold text-xl text-red-600';
      } else if(randomCase < 0.66) {
        bpm = (Math.random()*15+45).toFixed(1);
        rhythm = 'Regular';
        classification = 'Bradycardia';
        recTitle = 'Recommendation';
        recText = 'The heart rate is slower than normal. A consultation with a healthcare provider is recommended to rule out any underlying issues.';
        recColorClass = 'bg-yellow-50 border-l-4 border-yellow-500';
        recTextColorClass = 'text-yellow-900';
        resultBpm.className = 'font-bold text-xl text-yellow-600';
        resultRhythm.className = 'font-bold text-xl text-yellow-600';
      } else {
        bpm = (Math.random()*40+60).toFixed(1);
        rhythm = 'Regular';
        classification = 'Normal Sinus Rhythm';
        recTitle = 'All Clear';
        recText = 'The analysis indicates a normal heart rhythm within the expected range. No immediate concerns detected.';
        recColorClass = 'bg-green-50 border-l-4 border-green-500';
        recTextColorClass = 'text-green-900';
        resultBpm.className = 'font-bold text-xl text-green-600';
        resultRhythm.className = 'font-bold text-xl text-green-600';
      }
      resultFileName.textContent = inputName;
      resultBpm.innerHTML = `${bpm} <span class="text-base font-normal text-gray-600">bpm</span>`;
      resultRhythm.textContent = rhythm;
      resultClassification.textContent = classification;
      recommendationTitle.textContent = recTitle;
      recommendationText.textContent = recText;
      resultRecommendation.className = `p-6 rounded-xl text-center ${recColorClass}`;
      recommendationTitle.className = `text-xl font-bold ${recTextColorClass}`;
      recommendationText.className = `mt-2 ${recTextColorClass.replace('900','800')}`;
      resultRecommendation.querySelector('svg').className = `w-16 h-16 mx-auto mb-4 ${recTextColorClass.replace('900','500')}`;
      loaderContainer.classList.add('hidden');
      reportContainer.classList.remove('hidden');
    }, 2500);
  });

  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  mobileMenuButton.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });

  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', e => {
      e.preventDefault();
      mobileMenu.classList.add('hidden');
      document.querySelector(anchor.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
    });
  });
</script>
</body>
</html>
